<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Wavetech</title>

   <!-- Tailwind -->
   <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/datepicker.min.js"></script>

   <!-- Firebase App (the core Firebase SDK) -->
   <script src="https://www.gstatic.com/firebasejs/9.9.0/firebase-app-compat.js"></script>

   <!-- Firebase Storage -->
   <script src="https://www.gstatic.com/firebasejs/9.9.0/firebase-storage-compat.js"></script>


</head>

<body>
   <div>
      <div class="md:hidden fixed top-0 left-0 w-full bg-gray-800">
         <div class="flex justify-between items-center px-4 py-3">
            <div>
               <img class="h-8 w-auto"
                  src="https://tailwindui.com/img/logos/workflow-logo-indigo-500-mark-white-text.svg" alt="Workflow">
            </div>
            <button id="openDashboardButton" class="text-white focus:outline-none">
               <span class="sr-only">Open dashboard</span>
               <!-- Heroicon name: outline/menu -->
               <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                  stroke="currentColor" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7">
                  </path>
               </svg>
            </button>
         </div>
      </div>


      <!-- Off-canvas menu for mobile, show/hide based on off-canvas menu state. -->
      <div class="fixed inset-0 flex z-40 md:hidden hidden" role="dialog" aria-modal="true" id="mobileDashboard">
         <div class="fixed inset-0 bg-gray-600 bg-opacity-75" aria-hidden="true"></div>
         <div class="relative flex-1 flex flex-col max-w-xs w-full pt-5 pb-4 bg-gray-800">
            <div class="absolute top-0 right-0 -mr-12 pt-2">
               <button type="button"
                  class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                  <span class="sr-only">Close sidebar</span>
                  <!-- Heroicon name: outline/x -->
                  <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                     stroke="currentColor" aria-hidden="true">
                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                  </svg>
               </button>
            </div>

            <div class="flex-shrink-0 flex items-center px-4">
               <img class="h-8 w-auto"
                  src="https://tailwindui.com/img/logos/workflow-logo-indigo-500-mark-white-text.svg" alt="Workflow">
            </div>
            <div class="mt-5 flex-1 h-0 overflow-y-auto">
               <nav class="px-2 space-y-1">
                  <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                  <a href="#"
                     class="bg-gray-900 text-white group flex items-center px-2 py-2 text-base font-medium rounded-md">
                     <svg class="text-gray-300 mr-4 flex-shrink-0 h-6 w-6" xmlns="http://www.w3.org/2000/svg"
                        fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                           d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                     </svg>
                     Folha de Obra
                  </a>

                  <a href="#"
                     class="text-gray-300 hover:bg-gray-700 hover:text-white group flex items-center px-2 py-2 text-base font-medium rounded-md">
                     <!-- Heroicon name: outline/users -->
                     <svg class="text-gray-400 group-hover:text-gray-300 mr-4 flex-shrink-0 h-6 w-6"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                        aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                           d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                     </svg>
                     Consulta de Folha
                  </a>
               </nav>
            </div>
         </div>

         <div class="flex-shrink-0 w-14" aria-hidden="true">
            <!-- Dummy element to force sidebar to shrink to fit close icon -->
         </div>

         <script>
            // Function to toggle dashboard visibility
            function toggleDashboard() {
               var dashboard = document.getElementById('mobileDashboard');
               dashboard.classList.toggle('hidden');
            }

            // Function to close the dashboard
            function closeDashboard() {
               var dashboard = document.getElementById('mobileDashboard');
               dashboard.classList.add('hidden');
            }

            // Add event listener to the button to toggle dashboard
            document.addEventListener('DOMContentLoaded', function () {
               var toggleButton = document.getElementById('openDashboardButton');
               toggleButton.addEventListener('click', toggleDashboard);

               // Add event listener to the close button inside the dashboard
               var closeButton = document.querySelector('#mobileDashboard button');
               closeButton.addEventListener('click', closeDashboard);
            });

         </script>
      </div>

      <!-- Static sidebar for desktop -->
      <div class="hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0">
         <!-- Sidebar component, swap this element with another sidebar if you like -->
         <div class="flex-1 flex flex-col min-h-0 bg-gray-800">
            <div class="flex items-center h-16 flex-shrink-0 px-4 bg-gray-900">
               <img class="h-8 w-auto"
                  src="https://tailwindui.com/img/logos/workflow-logo-indigo-500-mark-white-text.svg" alt="Workflow">
            </div>
            <div class="flex-1 flex flex-col overflow-y-auto">
               <nav class="flex-1 px-2 py-4 space-y-1">
                  <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                  <a href="#"
                     class="sidebar-link flex bg-gray-900 text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                     <svg class="text-gray-300 mr-3 flex-shrink-0 h-6 w-6" xmlns="http://www.w3.org/2000/svg"
                        fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                           d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                     </svg>
                     Folha de Obra
                  </a>

                  <a href="#"
                     class="text-gray-300 hover:bg-gray-700 hover:text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                     <!-- Heroicon name: outline/users -->
                     <svg class="text-gray-400 group-hover:text-gray-300 mr-3 flex-shrink-0 h-6 w-6"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                        aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                           d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                     </svg>
                     Consulta de folha
                  </a>
               </nav>
            </div>
         </div>
      </div>

      <!-- Main Content -->
      <div class="md:pl-64 flex flex-col">
         <main class="flex-1 bg-gray-100">
            <div class="py-6">
               <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8">
                  <h1 class="text-2xl font-semibold text-gray-900"></h1>
               </div>
               <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8">
                  <div class="py-4">
                     <div class="space-y-6">

                        <!-- Embarcação -->
                        <div class="bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6">
                           <div class="md:grid md:grid-cols-3 md:gap-6">
                              <div class="md:col-span-1">
                                 <h3 class="text-lg font-medium leading-6 text-gray-900">Embarcação</h3>
                                 <p class="mt-1 text-sm text-gray-500">Informações básicas sobre a
                                    embarcação.</p>
                              </div>
                              <div class="mt-5 md:mt-0 md:col-span-2">
                                 <form class="space-y-6" action="#" method="POST">
                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="nome" class="block text-sm font-medium text-gray-700"> Nome
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="nome" id="nome"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="local" class="block text-sm font-medium text-gray-700"> Local
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="local" id="local"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="lugar" class="block text-sm font-medium text-gray-700"> Cais /
                                             Lugar
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="lugar" id="lugar"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>
                                 </form>
                              </div>
                           </div>
                        </div>

                        <!-- Faturação -->
                        <div class="bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6">
                           <div class="md:grid md:grid-cols-3 md:gap-6">
                              <div class="md:col-span-1">
                                 <h3 class="text-lg font-medium leading-6 text-gray-900">Faturação</h3>
                                 <p class="mt-1 text-sm text-gray-500">Detalhes financeiros e de pagamento
                                    relacionados ao serviço.</p>
                              </div>
                              <div class="mt-5 md:mt-0 md:col-span-2">
                                 <form class="space-y-6" action="#" method="POST">
                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="fatura" class="block text-sm font-medium text-gray-700"> Fatura nº
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="fatura" id="fatura"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="data" class="block text-sm font-medium text-gray-700"> Data
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input datepicker type="text" name="data" id="data"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="observacoes" class="block text-sm font-medium text-gray-700">
                                             Observações
                                          </label>
                                          <div class="mt-1">
                                             <textarea id="observacoes" name="observacoes" rows="3"
                                                class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md"></textarea>
                                          </div>
                                       </div>
                                    </div>
                                 </form>
                              </div>
                           </div>
                        </div>

                        <!-- Detalhes da Embarcação -->
                        <div class="bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6">
                           <div class="md:grid md:grid-cols-3 md:gap-6">
                              <div class="md:col-span-1">
                                 <h3 class="text-lg font-medium leading-6 text-gray-900">Detalhes da
                                    Embarcação</h3>
                                 <p class="mt-1 text-sm text-gray-500">Especificações adicionais da
                                    embarcação, incluindo características técnicas.</p>
                              </div>
                              <div class="mt-5 md:mt-0 md:col-span-2">
                                 <form class="space-y-6" action="#" method="POST">
                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="marca" class="block text-sm font-medium text-gray-700"> Marca
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="marca" id="marca"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="modelo" class="block text-sm font-medium text-gray-700"> Modelo
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="modelo" id="modelo"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="tamanho" class="block text-sm font-medium text-gray-700"> Tamanho
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="tamanho" id="tamanho"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="motor" class="block text-sm font-medium text-gray-700"> Motor (S)
                                             -
                                             Nº de Série
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="motor" id="motor"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="caixa" class="block text-sm font-medium text-gray-700"> Caixa /
                                             Coluna - Nº Serie
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="caixa" id="caixa"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>
                                 </form>
                              </div>
                           </div>
                        </div>

                        <!-- Cliente -->
                        <div class="bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6">
                           <div class="md:grid md:grid-cols-3 md:gap-6">
                              <div class="md:col-span-1">
                                 <h3 class="text-lg font-medium leading-6 text-gray-900">Cliente</h3>
                                 <p class="mt-1 text-sm text-gray-500">Dados do cliente, como nome, contato e
                                    informações de faturamento.</p>
                              </div>
                              <div class="mt-5 md:mt-0 md:col-span-2">
                                 <form class="space-y-6" action="#" method="POST">
                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="proprietario" class="block text-sm font-medium text-gray-700">
                                             Exmo. Sr.
                                             (a)
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="proprietario" id="proprietario"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="empresa" class="block text-sm font-medium text-gray-700"> Empresa
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="empresa" id="empresa"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="morada" class="block text-sm font-medium text-gray-700"> Morada
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="morada" id="morada"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="postal" class="block text-sm font-medium text-gray-700"> Código
                                             Postal
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="postal" id="postal"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="telefone" class="block text-sm font-medium text-gray-700">
                                             Telefone
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="telefone" id="telefone"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="email" class="block text-sm font-medium text-gray-700"> Email
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="email" id="email"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-6">
                                       <div class="col-span-3 sm:col-span-2">
                                          <label for="contribuinte" class="block text-sm font-medium text-gray-700">
                                             Contribuinte
                                          </label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input type="text" name="contribuinte" id="contribuinte"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>
                                    </div>
                                 </form>
                              </div>
                           </div>
                        </div>

                        <!-- Serviços a Executar -->
                        <div class="bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6">
                           <div class="md:grid md:grid-cols-3 md:gap-6">
                              <div class="md:col-span-1">
                                 <h3 class="text-lg font-medium leading-6 text-gray-900">Serviços a Executar
                                 </h3>
                                 <p class="mt-1 text-sm text-gray-500">Lista dos serviços a serem realizados
                                    na embarcação.</p>
                              </div>
                              <div class="mt-5 md:mt-0 md:col-span-2">
                                 <form action="#" method="POST">
                                    <div class="grid grid-cols-6 gap-6">

                                       <div class="col-span-6">
                                          <label for="servicos" class="block text-sm font-medium text-gray-700">Serviços
                                             a
                                             Executar</label>
                                          <textarea name="servicos" id="servicos" rows="3"
                                             class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"></textarea>
                                       </div>

                                       <div class="col-span-6">
                                          <label for="observacoes_servicos"
                                             class="block text-sm font-medium text-gray-700">Observações</label>
                                          <textarea name="observacoes_servicos" id="observacoes_servicos" rows="3"
                                             class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"></textarea>
                                       </div>

                                       <div class="col-span-6 sm:col-span-6 lg:col-span-2">
                                          <label for="data_recepcao"
                                             class="block text-sm font-medium text-gray-700">Data de
                                             Recepção</label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input datepicker type="text" name="data_recepcao" id="data_recepcao"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>

                                       <div class="col-span-6 sm:col-span-3 lg:col-span-2">
                                          <label for="data_entrega" class="block text-sm font-medium text-gray-700">Data
                                             de
                                             Entrega</label>
                                          <div class="mt-1 flex rounded-md shadow-sm">
                                             <input datepicker type="text" name="data_entrega" id="data_entrega"
                                                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300">
                                          </div>
                                       </div>

                                       <div class="col-span-6 sm:col-span-3 lg:col-span-2">
                                          <label for="responsavel" class="block text-sm font-medium text-gray-700">O
                                             Responsavel</label>
                                          <input type="text" name="responsavel" id="responsavel"
                                             class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                                       </div>
                                    </div>
                                 </form>
                              </div>
                           </div>
                        </div>

                        <!-- Descrição de Trabalhos -->
                        <div class="bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6">
                           <div class="md:grid md:grid-cols-3 md:gap-6">
                              <div class="md:col-span-1">
                                 <h3 class="text-lg font-medium leading-6 text-gray-900">Descrição de
                                    Trabalhos
                                 </h3>
                                 <p class="mt-1 text-sm text-gray-500">Breve descrição dos trabalhos a serem
                                    realizados, destacando objetivos e requisitos.</p>
                              </div>
                              <div class="mt-5 md:mt-0 md:col-span-2">
                                 <form action="#" method="POST">
                                    <div class="grid grid-cols-6 gap-6">

                                       <div class="col-span-6">
                                          <label for="descricao_trabalhos"
                                             class="block text-sm font-medium text-gray-700">Descrição de
                                             Trabalhos</label>
                                          <textarea name="descricao_trabalhos" id="descricao_trabalhos" rows="6"
                                             class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"></textarea>
                                       </div>
                                    </div>
                                 </form>
                              </div>
                           </div>
                        </div>

                        <!-- Materiais Aplicados e Subst. -->
                        <button id="addRowBtn"
                           class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded my-4">Adicionar
                           Material</button>

                        <div class="overflow-x-auto">
                           <table class="min-w-full bg-white rounded-lg overflow-hidden">
                              <thead class="bg-gray-50">
                                 <tr>
                                    <th
                                       class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                       Referência
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                                       id="Quantidade">
                                       Quantidade
                                    </th>
                                    <th
                                       class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                       Designação
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                                       id="PrecoUnitario">
                                       Preço Unitário
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                                       id="PrecoTotal">
                                       Preço Total
                                    </th>
                                 </tr>
                              </thead>
                              <tbody class="divide-y divide-gray-200">
                                 <!-- Table rows will be dynamically added here -->
                              </tbody>
                              <tfoot>
                                 <tr class="bg-gray-100">
                                    <td colspan="4" class="px-6 py-3 text-right text-sm font-medium text-gray-700">Total
                                       de Materiais s/ Iva
                                    </td>
                                    <td id="totalValue" class="px-6 py-3 text-sm font-medium text-gray-700">
                                       <span class="inline-block bg-gray-200 rounded-md px-2 py-1">0.00</span>
                                    </td>
                                 </tr>
                              </tfoot>
                           </table>
                        </div>

                        <script>
                           document.addEventListener("DOMContentLoaded", function () {
                              // Your web app's Firebase configuration
                              const firebaseConfig = {
                                 apiKey: "AIzaSyBfXkBnOCpD6nD-cZRqw0RPPeSP38WDJJU",
                                 authDomain: "wavetech-e961c.firebaseapp.com",
                                 databaseURL: "https://wavetech-e961c-default-rtdb.europe-west1.firebasedatabase.app",
                                 projectId: "wavetech-e961c",
                                 storageBucket: "wavetech-e961c.appspot.com",
                                 messagingSenderId: "195357475401",
                                 appId: "1:195357475401:web:4c155ee1f3394d3d9cb598"
                              };

                              // Initialize Firebase
                              firebase.initializeApp(firebaseConfig);

                              // Initialize Firebase Storage
                              const storage = firebase.storage();
                              const storageRef = storage.ref();

                              const tableBody = document.querySelector("tbody");
                              const totalCell = document.getElementById("totalValue");
                              const totalSpan = totalCell.querySelector(".inline-block");
                              const addRowBtn = document.getElementById("addRowBtn");
                              const saveBtn = document.getElementById("saveBtn");

                              let rowCounter = 0;

                              // Function to clear all fields
                              function clearAllFields() {
                                 // Clear text inputs
                                 document.querySelectorAll("input[type='text'], input[type='number'], input[type='email'], input[type='date']").forEach(input => {
                                    input.value = "";
                                 });

                                 // Clear text areas
                                 document.querySelectorAll("textarea").forEach(textarea => {
                                    textarea.value = "";
                                 });

                                 // Clear table rows
                                 tableBody.innerHTML = "";
                                 addRow(); // Add an initial empty row
                              }

                              // Add event listener for cancel button
                              cancelBtn.addEventListener("click", function () {
                                 const confirmed = confirm("Tem a certeza que pretende apagar tudo?");
                                 if (confirmed) {
                                    clearAllFields();
                                    document.querySelector("#totalValue .inline-block").textContent = "0.00€"
                                 }
                              });

                              function updateTotal() {
                                 let total = 0;
                                 const rows = tableBody.querySelectorAll("tr");

                                 rows.forEach(row => {
                                    const quantityInput = row.querySelector("td:nth-child(2) input");
                                    const unitPriceInput = row.querySelector("td:nth-child(4) input");
                                    const quantity = parseFloat(quantityInput.value);
                                    const unitPrice = parseFloat(unitPriceInput.value);

                                    const rowID = row.querySelector("td.hidden").textContent;
                                    const precoTotalSpan = document.getElementById(`precoTotal${rowID}`);

                                    const quantidadeDiv = document.getElementById(`quantidade${rowID}`);
                                    const precoUniDiv = document.getElementById(`precoUni${rowID}`);
                                    const precoTotalDiv = document.getElementById(`precoTotal${rowID}`);

                                    if (!isNaN(quantidadeDiv.value) && !isNaN(precoUniDiv.value)) {
                                       const subtotal = parseFloat(quantidadeDiv.value) * parseFloat(precoUniDiv.value);
                                       total += subtotal; // Accumulate total
                                       precoTotalSpan.textContent = subtotal.toFixed(2) + "€";
                                       totalSpan.textContent = total.toFixed(2) + "€";
                                    }

                                    if (!quantidadeDiv.value || !precoUniDiv.value) {
                                       precoTotalDiv.textContent = "0.00€";
                                       totalSpan.textContent = "0.00€";
                                    }
                                 });


                                 if (rows.length === 0) {
                                    // If there are no rows, set total to 0.00€
                                    totalSpan.textContent = "0.00€";
                                    return; // Exit the function
                                 }
                              }

                              // Add event listener for input changes
                              tableBody.addEventListener("input", function (event) {
                                 if (event.target.tagName === "INPUT") {
                                    updateTotal();
                                 }
                              });

                              // Add event listener for add row button
                              addRowBtn.addEventListener("click", function () {
                                 addRow();
                              });

                              // Function to add a new row to the table
                              function addRow() {
                                 rowCounter++;
                                 const newRow = document.createElement("tr");
                                 const rowID = `row_${rowCounter}`;
                                 newRow.innerHTML = `
                                    <td class="hidden">${rowID}</td>
                                    <td class="px-6 py-4 whitespace-nowrap"><input type="text" class="w-full border rounded-md"></td>
                                    <td class="px-6 py-4 whitespace-nowrap"><input type="number" class="w-full border rounded-md" id="quantidade${rowID}"></td>
                                    <td class="px-6 py-4 whitespace-nowrap"><input type="text" class="w-full border rounded-md"></td>
                                    <td class="px-6 py-4 whitespace-nowrap"><input type="number" class="w-full border rounded-md" id="precoUni${rowID}"></td>
                                    <td class="px-6 py-5 whitespace-nowrap text-right flex items-center">
                                          <span id="precoTotal${rowID}" class="mr-4">0.00€</span>
                                          <button type="button" class="bg-red-600 hover:bg-red-700 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center shadow-md focus:outline-none font-bold focus:ring-2 focus:ring-offset-2 focus:ring-red-500" onclick="deleteRow(this)">X</button>
                                    </td>`;
                                 tableBody.appendChild(newRow);
                              }

                              // Function to delete a row
                              window.deleteRow = function (button) {
                                 if (confirm("Tem a certeza que pretende apagar esta linha?")) {
                                    button.closest("tr").remove();
                                    updateTotal(); // Update total after row deletion
                                 }
                              };

                              // Function to check for empty fields and highlight them
                              function checkEmptyFields() {
                                 let emptyFields = false;
                                 const rows = tableBody.querySelectorAll("tr");
                                 rows.forEach(row => {
                                    const inputs = row.querySelectorAll("input");
                                    inputs.forEach(input => {
                                       if (input.value.trim() === "") {
                                          input.classList.add("border-red-500");
                                          emptyFields = true;
                                       } else {
                                          input.classList.remove("border-red-500");
                                       }
                                    });
                                 });
                                 return !emptyFields; // Returns true if all fields are filled
                              }

                              // Add event listener for save button
                              saveBtn.addEventListener("click", function (event) {
                                 if (!checkEmptyFields()) {
                                    event.preventDefault(); // Prevent form submission if there are empty fields
                                    alert("Por favor preencha todos os campos.");
                                 } else {
                                    saveFormData();
                                 }
                              });

                              // Function to save form data to JSON
                              function saveFormData() {
                                 const formData = {
                                    id: new Date().toISOString(), // Unique identifier
                                    nome: document.getElementById("nome").value,
                                    local: document.getElementById("local").value,
                                    lugar: document.getElementById("lugar").value,
                                    fatura: document.getElementById("fatura").value,
                                    data: document.getElementById("data").value,
                                    observacoes: document.getElementById("observacoes").value,
                                    marca: document.getElementById("marca").value,
                                    modelo: document.getElementById("modelo").value,
                                    tamanho: document.getElementById("tamanho").value,
                                    motor: document.getElementById("motor").value,
                                    caixa: document.getElementById("caixa").value,
                                    proprietario: document.getElementById("proprietario").value,
                                    empresa: document.getElementById("empresa").value,
                                    morada: document.getElementById("morada").value,
                                    postal: document.getElementById("postal").value,
                                    telefone: document.getElementById("telefone").value,
                                    email: document.getElementById("email").value,
                                    contribuinte: document.getElementById("contribuinte").value,
                                    servicos: document.getElementById("servicos").value,
                                    observacoes_servicos: document.getElementById("observacoes_servicos").value,
                                    data_recepcao: document.getElementById("data_recepcao").value,
                                    data_entrega: document.getElementById("data_entrega").value,
                                    responsavel: document.getElementById("responsavel").value,
                                    descricao_trabalhos: document.getElementById("descricao_trabalhos").value,
                                    materiais: [],
                                    total_sIva: document.querySelector("#totalValue .inline-block").textContent.replace("€", "").trim()
                                 };

                                 // Gather materials data from the table
                                 const rows = tableBody.querySelectorAll("tr");
                                 rows.forEach(row => {
                                    const reference = row.querySelector("td:nth-child(2) input").value.trim();
                                    const quantity = row.querySelector("td:nth-child(3) input").value.trim();
                                    const designation = row.querySelector("td:nth-child(4) input").value.trim();
                                    const unitPrice = row.querySelector("td:nth-child(5) input").value.trim();
                                    const totalPrice = row.querySelector("td:nth-child(6)").textContent
                                       .split('€')[0]  // Split at '€' and take the first part
                                       .trim();         // Remove any remaining whitespace

                                    if (reference && quantity && designation && unitPrice) {
                                       formData.materiais.push({
                                          referencia: reference,
                                          quantidade: quantity,
                                          designacao: designation,
                                          preco_unitario: unitPrice,
                                          preco_total: totalPrice
                                       });
                                    }
                                 });

                                 const jsonString = JSON.stringify(formData, null, 2);
                                 const blob = new Blob([jsonString], { type: "application/json" });

                                 // Fetch the existing data
                                 const formRef = storageRef.child('form_data.json');
                                 formRef.getDownloadURL().then((url) => {
                                    return fetch(url);
                                 }).then((response) => {
                                    if (!response.ok) {
                                       throw new Error('Network response was not ok');
                                    }
                                    return response.json();
                                 }).then((existingData) => {
                                    // Initialize existingData as an array if it's not already
                                    if (!Array.isArray(existingData)) {
                                       existingData = [];
                                    }
                                    existingData.push(formData);
                                    const updatedJsonString = JSON.stringify(existingData, null, 2);
                                    const updatedBlob = new Blob([updatedJsonString], { type: "application/json" });

                                    return formRef.put(updatedBlob);
                                 }).then((snapshot) => {
                                    console.log('Uploaded updated JSON file!', snapshot);
                                    alert('Form data saved successfully!');
                                 }).catch((error) => {
                                    if (error.message === 'Network response was not ok') {
                                       // Handle case where file does not exist
                                       const initialData = [formData];
                                       const initialJsonString = JSON.stringify(initialData, null, 2);
                                       const initialBlob = new Blob([initialJsonString], { type: "application/json" });
                                       return formRef.put(initialBlob);
                                    } else {
                                       console.error('Error uploading the file:', error);
                                       alert('Failed to save form data.');
                                    }
                                 });
                              }

                              // Add initial row
                              addRow();
                           });
                        </script>

                        <div class="flex justify-end">
                           <button id="cancelBtn" type="button"
                              class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Limpar
                              tudo</button>
                           <button type="submit" id="saveBtn"
                              class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Save</button>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </main>
      </div>

   </div>
</body>

</html>